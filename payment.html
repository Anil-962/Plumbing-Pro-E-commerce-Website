<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PlumbPro - Checkout</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ===== Global Styles ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: #f8f9fa;
      color: #333;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* ===== Header & Nav Styles ===== */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 30px;
      background: #0077b6;
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .logo h1 { 
      margin: 0; 
      font-size: 1.8rem; 
      display: flex;
      align-items: center;
    }
    
    .logo h1 i {
      margin-right: 10px;
      color: #ffcc00;
    }
    
    nav ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
    }
    
    nav ul li { 
      position: relative; 
      margin: 0 5px;
    }
    
    nav ul li a {
      color: #fff;
      text-decoration: none;
      padding: 8px 15px;
      display: block;
      font-weight: 500;
      border-radius: 5px;
      transition: all 0.3s ease;
    }
    
    nav ul li a:hover { 
      background: rgba(255,255,255,0.2); 
    }
    
    nav ul li a.active {
      background: rgba(255,255,255,0.2);
    }
    
    /* Mobile menu button */
    .menu-btn {
      display: none;
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
    }

    /* ===== Page Title ===== */
    .page-title {
      text-align: center;
      margin: 30px 0;
      color: #0077b6;
      position: relative;
      padding-bottom: 15px;
    }
    
    .page-title:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: #ff6600;
      border-radius: 2px;
    }
    
    /* ===== Checkout Page Styles ===== */
    .checkout-container {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      margin-bottom: 40px;
    }
    
    .checkout-form {
      flex: 2;
      min-width: 300px;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    
    .order-summary {
      flex: 1;
      min-width: 300px;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      align-self: flex-start;
    }
    
    .form-section {
      margin-bottom: 30px;
    }
    
    .section-title {
      margin-bottom: 20px;
      color: #0077b6;
      padding-bottom: 10px;
      border-bottom: 2px solid #f0f0f0;
      display: flex;
      align-items: center;
    }
    
    .section-title i {
      margin-right: 10px;
    }
    
    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .form-group {
      flex: 1;
      min-width: 250px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #0077b6;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: #0077b6;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,119,182,0.2);
    }
    
    .form-group .error-message {
      color: #dc3545;
      font-size: 0.85rem;
      margin-top: 5px;
      display: none;
    }
    
    .form-group.error input,
    .form-group.error select,
    .form-group.error textarea {
      border-color: #dc3545;
    }
    
    .form-group.error .error-message {
      display: block;
    }
    
    .checkbox-group {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .checkbox-group input {
      margin-right: 10px;
    }
    
    /* Order Summary */
    .summary-title {
      margin-bottom: 20px;
      color: #0077b6;
      padding-bottom: 10px;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .order-items {
      margin-bottom: 20px;
    }
    
    .order-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .order-item-name {
      flex: 2;
    }
    
    .order-item-quantity {
      flex: 1;
      text-align: center;
    }
    
    .order-item-price {
      flex: 1;
      text-align: right;
      font-weight: 600;
      color: #ff6600;
    }
    
    .summary-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
    }
    
    .summary-total {
      display: flex;
      justify-content: space-between;
      margin: 25px 0;
      padding-top: 15px;
      border-top: 2px solid #f0f0f0;
      font-size: 1.2rem;
      font-weight: 600;
      color: #0077b6;
    }
    
    /* Payment Methods */
    .payment-methods {
      margin: 20px 0;
    }
    
    .payment-method {
      display: flex;
      align-items: center;
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 8px;
      margin-bottom: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .payment-method:hover {
      border-color: #0077b6;
    }
    
    .payment-method.selected {
      border-color: #0077b6;
      background-color: rgba(0,119,182,0.05);
    }
    
    .payment-method input {
      margin-right: 15px;
    }
    
    .payment-method i {
      font-size: 1.5rem;
      margin-right: 15px;
      color: #0077b6;
    }
    
    .payment-details {
      margin-top: 20px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      display: none;
    }
    
    .payment-details.active {
      display: block;
    }
    
    /* Card Number Input Group */
    .card-input-group {
      position: relative;
    }
    
    .card-icons {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      gap: 5px;
    }
    
    .card-icon {
      width: 40px;
      height: 25px;
      background-color: #f0f0f0;
      border-radius: 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      color: #666;
    }
    
    .card-icon.visa {
      background-color: #1a1f71;
      color: white;
    }
    
    .card-icon.mastercard {
      background: linear-gradient(135deg, #ff5f00, #eb001b, #f79e1b);
      color: white;
    }
    
    /* UPI ID Input */
    .upi-input-group {
      display: flex;
      align-items: center;
    }
    
    .upi-input-group input {
      flex: 1;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }
    
    .upi-input-group .verify-btn {
      background: #0077b6;
      color: white;
      border: none;
      padding: 12px 15px;
      border-top-right-radius: 5px;
      border-bottom-right-radius: 5px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.3s ease;
    }
    
    .upi-input-group .verify-btn:hover {
      background: #005b8a;
    }
    
    /* Net Banking Options */
    .net-banking-options {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }
    
    .bank-option {
      display: flex;
      align-items: center;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .bank-option:hover {
      border-color: #0077b6;
      background-color: rgba(0,119,182,0.05);
    }
    
    .bank-option.selected {
      border-color: #0077b6;
      background-color: rgba(0,119,182,0.1);
    }
    
    .bank-option img {
      width: 30px;
      height: 30px;
      object-fit: contain;
      margin-right: 10px;
    }
    
    /* Buttons */
    .place-order-btn {
      width: 100%;
      padding: 15px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 15px;
    }
    
    .place-order-btn:hover {
      background: #218838;
    }
    
    .btn-back {
      display: inline-block;
      padding: 12px 20px;
      background: #6c757d;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-weight: 500;
      transition: all 0.3s ease;
      margin-top: 15px;
    }
    
    .btn-back:hover {
      background: #5a6268;
      color: white;
    }
    
    /* ===== Payment Processing Modal ===== */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .order-success-modal {
      background: white;
      border-radius: 10px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);
      transform: translateY(-50px);
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active .order-success-modal {
      transform: translateY(0);
    }
    
    .success-icon {
      font-size: 4rem;
      color: #28a745;
      margin-bottom: 20px;
    }
    
    .success-title {
      font-size: 1.8rem;
      margin-bottom: 15px;
      color: #0077b6;
    }
    
    .success-message {
      margin-bottom: 25px;
      color: #555;
    }
    
    .order-details {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 25px;
      text-align: left;
    }
    
    .order-details p {
      margin-bottom: 8px;
    }
    
    .order-id {
      font-weight: 600;
      color: #0077b6;
    }
    
    .modal-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
    }
    
    .modal-btn {
      padding: 10px 20px;
      border-radius: 5px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn-view-orders {
      background: #0077b6;
      color: white;
      border: none;
    }
    
    .btn-view-orders:hover {
      background: #005b8a;
    }
    
    .btn-continue-shopping {
      background: #f8f9fa;
      color: #333;
      border: 1px solid #ddd;
    }
    
    .btn-continue-shopping:hover {
      background: #e9ecef;
    }
    
    /* ===== Payment Processing Modal ===== */
    .payment-processing {
      text-align: center;
      padding: 20px;
    }
    
    .payment-spinner {
      font-size: 3rem;
      color: #0077b6;
      margin-bottom: 20px;
      animation: spin 1.5s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* ===== Responsive Styles ===== */
    @media (max-width: 992px) {
      .checkout-container {
        flex-direction: column;
      }
    }
    
    @media (max-width: 768px) {
      header {
        flex-wrap: wrap;
      }
      
      .menu-btn {
        display: block;
      }
      
      nav {
        width: 100%;
        margin-top: 15px;
        display: none;
      }
      
      nav.active {
        display: block;
      }
      
      nav ul {
        flex-direction: column;
        align-items: flex-start;
      }
      
      nav ul li {
        width: 100%;
        margin: 5px 0;
      }
      
      .form-row {
        flex-direction: column;
        gap: 15px;
      }
      
      .form-group {
        width: 100%;
      }
      
      .net-banking-options {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .modal-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- ===== Header with Navigation ===== -->
  <header>
    <div class="logo">
      <h1><i class="fas fa-faucet"></i> PlumbPro</h1>
    </div>
    
    <button class="menu-btn" id="menu-toggle">
      <i class="fas fa-bars"></i>
    </button>
    
    <nav id="main-nav">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="pipes.html">Products</a></li>
        <li><a href="cart.html">Cart</a></li>
        <li><a href="#" class="active">Checkout</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <!-- ===== Main Content ===== -->
  <div class="container">
    <h1 class="page-title">Checkout</h1>
    
    <div class="checkout-container">
      <div class="checkout-form">
        <form id="checkoutForm">
          <!-- Shipping Information -->
          <div class="form-section">
            <h2 class="section-title"><i class="fas fa-truck"></i> Shipping Information</h2>
            
            <div class="form-row">
              <div class="form-group" id="firstNameGroup">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" required>
                <div class="error-message">Please enter your first name</div>
              </div>
              
              <div class="form-group" id="lastNameGroup">
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" required>
                <div class="error-message">Please enter your last name</div>
              </div>
            </div>
            
            <div class="form-group" id="emailGroup">
              <label for="email">Email Address</label>
              <input type="email" id="email" required>
              <div class="error-message">Please enter a valid email address</div>
            </div>
            
            <div class="form-group" id="phoneGroup">
              <label for="phone">Phone Number</label>
              <input type="tel" id="phone" required pattern="[0-9]{10}" maxlength="10" placeholder="Enter 10-digit number">
              <div class="error-message">Please enter a valid 10-digit phone number</div>
            </div>
            
            <div class="form-group" id="addressGroup">
              <label for="address">Shipping Address</label>
              <input type="text" id="address" required>
              <div class="error-message">Please enter your shipping address</div>
            </div>
            
            <div class="form-row">
              <div class="form-group" id="cityGroup">
                <label for="city">City</label>
                <input type="text" id="city" required>
                <div class="error-message">Please enter your city</div>
              </div>
              
              <div class="form-group" id="stateGroup">
                <label for="state">State</label>
                <input type="text" id="state" required>
                <div class="error-message">Please enter your state</div>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group" id="zipCodeGroup">
                <label for="zipCode">ZIP Code</label>
                <input type="text" id="zipCode" maxlength="6" required>
                <div class="error-message">Please enter a valid ZIP code</div>
              </div>
              
              <div class="form-group" id="countryGroup">
                <label for="country">Country</label>
                <select id="country" required>
                  <option value="">Select Country</option>
                  <option value="USA">United States</option>
                  <option value="UK">United Kingdom</option>
                  <option value="CA">Canada</option>
                  <option value="AU">Australia</option>
                  <option value="IN" selected>India</option>
                </select>
                <div class="error-message">Please select your country</div>
              </div>
            </div>
            
            <div class="checkbox-group">
              <input type="checkbox" id="differentBilling">
              <label for="differentBilling">Billing address is different from shipping address</label>
            </div>
          </div>
          
          <!-- Billing Information (Initially Hidden) -->
          <div class="form-section" id="billingSection" style="display: none;">
            <h2 class="section-title"><i class="fas fa-credit-card"></i> Billing Information</h2>
            
            <div class="form-row">
              <div class="form-group" id="billingFirstNameGroup">
                <label for="billingFirstName">First Name</label>
                <input type="text" id="billingFirstName">
                <div class="error-message">Please enter your first name</div>
              </div>
              
              <div class="form-group" id="billingLastNameGroup">
                <label for="billingLastName">Last Name</label>
                <input type="text" id="billingLastName">
                <div class="error-message">Please enter your last name</div>
              </div>
            </div>
            
            <div class="form-group" id="billingAddressGroup">
              <label for="billingAddress">Billing Address</label>
              <input type="text" id="billingAddress">
              <div class="error-message">Please enter your billing address</div>
            </div>
            
            <div class="form-row">
              <div class="form-group" id="billingCityGroup">
                <label for="billingCity">City</label>
                <input type="text" id="billingCity">
                <div class="error-message">Please enter your city</div>
              </div>
              
              <div class="form-group" id="billingStateGroup">
                <label for="billingState">State</label>
                <input type="text" id="billingState">
                <div class="error-message">Please enter your state</div>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group" id="billingZipCodeGroup">
                <label for="billingZipCode">ZIP Code</label>
                <input type="text" id="billingZipCode">
                <div class="error-message">Please enter a valid ZIP code</div>
              </div>
              
              <div class="form-group" id="billingCountryGroup">
                <label for="billingCountry">Country</label>
                <select id="billingCountry">
                  <option value="">Select Country</option>
                  <option value="USA">United States</option>
                  <option value="UK">United Kingdom</option>
                  <option value="CA">Canada</option>
                  <option value="AU">Australia</option>
                  <option value="IN" selected>India</option>
                </select>
                <div class="error-message">Please select your country</div>
              </div>
            </div>
          </div>
          
          <!-- Payment Method -->
          <div class="form-section">
            <h2 class="section-title"><i class="fas fa-money-bill-wave"></i> Payment Method</h2>
            
            <div class="payment-methods">
              <div class="payment-method" data-method="credit-card">
                <input type="radio" id="creditCard" name="paymentMethod" value="credit-card" checked>
                <i class="fas fa-credit-card"></i>
                <label for="creditCard">Credit/Debit Card</label>
              </div>
              
              <div class="payment-method" data-method="upi">
                <input type="radio" id="upi" name="paymentMethod" value="upi">
                <i class="fas fa-mobile-alt"></i>
                <label for="upi">UPI Payment</label>
              </div>
              
              <div class="payment-method" data-method="net-banking">
                <input type="radio" id="netBanking" name="paymentMethod" value="net-banking">
                <i class="fas fa-university"></i>
                <label for="netBanking">Net Banking</label>
              </div>
              
              <div class="payment-method" data-method="cash-on-delivery">
                <input type="radio" id="cashOnDelivery" name="paymentMethod" value="cash-on-delivery">
                <i class="fas fa-money-bill"></i>
                <label for="cashOnDelivery">Cash on Delivery</label>
              </div>
            </div>
            
            <!-- Credit Card Details -->
            <div class="payment-details active" id="creditCardDetails">
              <div class="form-group" id="cardNumberGroup">
                <label for="cardNumber">Card Number</label>
                <div class="card-input-group">
                  <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" required>
                  <div class="card-icons">
                    <div class="card-icon visa">VISA</div>
                    <div class="card-icon mastercard">MC</div>
                  </div>
                </div>
                <div class="error-message">Please enter a valid card number</div>
              </div>
              
              <div class="form-row">
                <div class="form-group" id="expiryDateGroup">
                  <label for="expiryDate">Expiry Date</label>
                  <input type="text" id="expiryDate" placeholder="MM/YY" required>
                  <div class="error-message">Please enter a valid expiry date</div>
                </div>
                
                <div class="form-group" id="cvvGroup">
                  <label for="cvv">CVV</label>
                  <input type="text" id="cvv" placeholder="123" maxlength="4" required>
                  <div class="error-message">Please enter a valid CVV</div>
                </div>
              </div>
              
              <div class="form-group" id="cardNameGroup">
                <label for="cardName">Name on Card</label>
                <input type="text" id="cardName" required>
                <div class="error-message">Please enter the name on your card</div>
              </div>
            </div>
            
            <!-- UPI Details -->
            <div class="payment-details" id="upiDetails">
              <p>Enter your UPI ID to pay instantly</p>
              <div class="form-group" id="upiIdGroup">
                <label for="upiId">UPI ID</label>
                <div class="upi-input-group">
                  <input type="text" id="upiId" placeholder="yourname@upi" required>
                  <button type="button" class="verify-btn" id="verifyUpiBtn">Verify</button>
                </div>
                <div class="error-message">Please enter a valid UPI ID</div>
              </div>
              <p class="upi-note">Popular UPI Apps: Google Pay, PhonePe, Paytm, BHIM</p>
            </div>
            
            <!-- Net Banking Details -->
            <div class="payment-details" id="netBankingDetails">
              <p>Select your bank to proceed with payment</p>
              <div class="net-banking-options">
                <div class="bank-option" data-bank="sbi">
                  <img src="https://via.placeholder.com/30x30/1a73e8/ffffff?text=SBI" alt="SBI">
                  <span>SBI</span>
                </div>
                <div class="bank-option" data-bank="hdfc">
                  <img src="https://via.placeholder.com/30x30/0046ff/ffffff?text=HDFC" alt="HDFC">
                  <span>HDFC</span>
                </div>
                <div class="bank-option" data-bank="icici">
                  <img src="https://via.placeholder.com/30x30/ff6d00/ffffff?text=ICICI" alt="ICICI">
                  <span>ICICI</span>
                </div>
                <div class="bank-option" data-bank="axis">
                  <img src="https://via.placeholder.com/30x30/0072e5/ffffff?text=AXIS" alt="Axis">
                  <span>Axis</span>
                </div>
                <div class="bank-option" data-bank="pnb">
                  <img src="https://via.placeholder.com/30x30/cc0000/ffffff?text=PNB" alt="PNB">
                  <span>PNB</span>
                </div>
                <div class="bank-option" data-bank="other">
                  <img src="https://via.placeholder.com/30x30/666666/ffffff?text=OTHER" alt="Other">
                  <span>Other Bank</span>
                </div>
              </div>
              <div class="form-group" id="selectedBankGroup" style="display: none;">
                <label>Selected Bank</label>
                <input type="text" id="selectedBank" readonly>
              </div>
            </div>
            
            <!-- Cash on Delivery Details -->
            <div class="payment-details" id="cashOnDeliveryDetails">
              <div class="cod-info">
                <i class="fas fa-info-circle" style="color: #0077b6; margin-right: 10px;"></i>
                <span>Pay when your order is delivered</span>
              </div>
              <div class="cod-conditions">
                <p><strong>Note:</strong></p>
                <ul>
                  <li>Cash on Delivery is available for orders up to ₹5000</li>
                  <li>Exact change is appreciated</li>
                  <li>A small processing fee of ₹20 applies to all COD orders</li>
                </ul>
              </div>
            </div>
          </div>
          
          <!-- Fixed Place Order button -->
          <button type="submit" class="place-order-btn">Place Order</button>
        </form>
        <a href="orders.html" class="btn-back"><i class="fas fa-arrow-right"></i> Go to orders</a>
        <a href="cart.html" class="btn-back"><i class="fas fa-arrow-left"></i> Back to Cart</a>
      </div>
      
      <div class="order-summary">
        <h2 class="summary-title">Order Summary</h2>
        <div class="order-items" id="orderItems"></div>

        <div class="summary-item"><span>Subtotal:</span> <span id="subtotal">₹0.00</span></div>
        <div class="summary-item"><span>Shipping:</span> <span id="shipping">₹50.00</span></div>
        <div class="summary-item"><span>Tax (12%):</span> <span id="tax">₹0.00</span></div>
        <div class="summary-item"><span>Discount:</span> <span id="discount">-₹100.00</span></div>
        <div class="summary-total"><span>Total:</span> <span id="total">₹0.00</span></div>
      </div>
    </div>
  </div>

  <!-- ===== Payment Processing Modal ===== -->
  <div class="modal-overlay" id="paymentProcessingModal">
    <div class="order-success-modal">
      <div class="payment-processing">
        <div class="payment-spinner">
          <i class="fas fa-spinner"></i>
        </div>
        <h2 class="success-title">Processing Payment</h2>
        <p class="success-message">Please wait while we process your payment. Do not refresh the page.</p>
      </div>
    </div>
  </div>

  <!-- ===== Order Success Modal ===== -->
  <div class="modal-overlay" id="orderSuccessModal">
    <div class="order-success-modal">
      <div class="success-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <h2 class="success-title">Order Placed Successfully!</h2>
      <p class="success-message">Thank you for your order. Your order has been confirmed and will be shipped soon.</p>
      
      <div class="order-details">
        <p><strong>Order ID:</strong> <span id="successOrderId" class="order-id"></span></p>
        <p><strong>Estimated Delivery:</strong> <span id="estimatedDelivery"></span></p>
        <p><strong>Shipping to:</strong> <span id="shippingAddress"></span></p>
      </div>
      
      <div class="modal-buttons">
        <button class="modal-btn btn-view-orders" id="viewOrdersBtn">View My Orders</button>
        <button class="modal-btn btn-continue-shopping" id="continueShoppingBtn">Continue Shopping</button>
      </div>
    </div>
  </div>

  <script>
    // ===== Mobile Menu Toggle =====
    const menuToggle = document.getElementById('menu-toggle');
    const mainNav = document.getElementById('main-nav');
    
    menuToggle.addEventListener('click', () => {
      mainNav.classList.toggle('active');
    });
    
    // ===== Billing Address Toggle =====
    const differentBilling = document.getElementById('differentBilling');
    const billingSection = document.getElementById('billingSection');
    
    differentBilling.addEventListener('change', () => {
      if (differentBilling.checked) {
        billingSection.style.display = 'block';
        // Copy shipping info to billing if empty
        if (!document.getElementById('billingFirstName').value) {
          document.getElementById('billingFirstName').value = document.getElementById('firstName').value;
          document.getElementById('billingLastName').value = document.getElementById('lastName').value;
          document.getElementById('billingAddress').value = document.getElementById('address').value;
          document.getElementById('billingCity').value = document.getElementById('city').value;
          document.getElementById('billingState').value = document.getElementById('state').value;
          document.getElementById('billingZipCode').value = document.getElementById('zipCode').value;
          document.getElementById('billingCountry').value = document.getElementById('country').value;
        }
      } else {
        billingSection.style.display = 'none';
      }
    });
    
    // ===== Payment Method Selection =====
    const paymentMethods = document.querySelectorAll('.payment-method');
    const paymentDetails = document.querySelectorAll('.payment-details');
    
    // Function to update payment method display
    function updatePaymentMethodDisplay() {
      // Get the selected payment method
      const selectedMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
      
      // Update UI for selected method
      paymentMethods.forEach(method => {
        if (method.getAttribute('data-method') === selectedMethod) {
          method.classList.add('selected');
        } else {
          method.classList.remove('selected');
        }
      });
      
      // Show appropriate payment details
      paymentDetails.forEach(detail => {
        detail.classList.remove('active');
        if (detail.id === `${selectedMethod}Details`) {
          detail.classList.add('active');
        }
      });
    }
    
    // Add event listeners to payment methods
    paymentMethods.forEach(method => {
      method.addEventListener('click', () => {
        // Update radio button selection
        const radio = method.querySelector('input[type="radio"]');
        radio.checked = true;
        
        // Update the display
        updatePaymentMethodDisplay();
      });
    });
    
    // Also add event listeners to the radio buttons directly
    document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
      radio.addEventListener('change', updatePaymentMethodDisplay);
    });
    
    // ===== Net Banking Selection =====
    const bankOptions = document.querySelectorAll('.bank-option');
    const selectedBankInput = document.getElementById('selectedBank');
    const selectedBankGroup = document.getElementById('selectedBankGroup');
    
    bankOptions.forEach(option => {
      option.addEventListener('click', () => {
        // Remove selected class from all options
        bankOptions.forEach(opt => opt.classList.remove('selected'));
        
        // Add selected class to clicked option
        option.classList.add('selected');
        
        // Update the selected bank input
        const bankName = option.querySelector('span').textContent;
        selectedBankInput.value = bankName;
        selectedBankGroup.style.display = 'block';
      });
    });
    
    // ===== UPI Verification =====
    const verifyUpiBtn = document.getElementById('verifyUpiBtn');
    
    verifyUpiBtn.addEventListener('click', () => {
      const upiId = document.getElementById('upiId').value;
      const upiIdGroup = document.getElementById('upiIdGroup');
      
      if (validateUPI(upiId)) {
        upiIdGroup.classList.remove('error');
        showSuccessMessage('UPI ID is valid! You can proceed with payment.');
      } else {
        upiIdGroup.classList.add('error');
        showError('upiId', 'Please enter a valid UPI ID');
      }
    });
    
    // ===== Credit Card Number Formatting =====
    const cardNumberInput = document.getElementById('cardNumber');
    
    cardNumberInput.addEventListener('input', function(e) {
      // Remove all non-digit characters
      let value = e.target.value.replace(/\D/g, '');
      
      // Add space after every 4 digits
      value = value.replace(/(\d{4})(?=\d)/g, '$1 ');
      
      // Update the input value
      e.target.value = value;
    });
    
    // ===== Load Cart Items and Calculate Total =====
    function loadCartItems() {
      // Try to parse cart data from localStorage with error handling
      let cart = [];
      try {
        const cartData = localStorage.getItem('cart');
        cart = cartData ? JSON.parse(cartData) : [];
      } catch (e) {
        console.error('Error loading cart data:', e);
        cart = [];
      }
      
      // If no cart data, create some sample data for demonstration
      if (cart.length === 0) {
        cart = [
          { id: 1, name: 'Plumbing Pipe', price: 1200, quantity: 2 },
          { id: 2, name: 'Faucet Set', price: 3500, quantity: 1 },
          { id: 3, name: 'Pipe Wrench', price: 850, quantity: 1 }
        ];
        localStorage.setItem('cart', JSON.stringify(cart));
      }
      
      const orderItemsContainer = document.getElementById('orderItems');
      orderItemsContainer.innerHTML = '';
      
      let subtotal = 0;
      
      if (cart.length === 0) {
        orderItemsContainer.innerHTML = '<p class="empty-cart">Your cart is empty</p>';
        document.getElementById('subtotal').textContent = '₹0.00';
        document.getElementById('tax').textContent = '₹0.00';
        document.getElementById('total').textContent = '₹0.00';
        return;
      }
      
      cart.forEach(item => {
        // Handle both "quantity" and "qty" property names
        const quantity = item.quantity || item.qty || 1;
        const itemTotal = item.price * quantity;
        subtotal += itemTotal;
        
        const orderItem = document.createElement('div');
        orderItem.className = 'order-item';
        orderItem.innerHTML = `
          <div class="order-item-name">${item.name}</div>
          <div class="order-item-quantity">${quantity} x</div>
          <div class="order-item-price">₹${itemTotal.toFixed(2)}</div>
        `;
        
        orderItemsContainer.appendChild(orderItem);
      });
      
      const shipping = 50;
      const tax = subtotal * 0.12;
      const discount = 100;
      const total = subtotal + shipping + tax - discount;
      
      // Update all currency displays to use ₹
      document.getElementById('subtotal').textContent = `₹${subtotal.toFixed(2)}`;
      document.getElementById('shipping').textContent = `₹${shipping.toFixed(2)}`;
      document.getElementById('tax').textContent = `₹${tax.toFixed(2)}`;
      document.getElementById('discount').textContent = `-₹${discount.toFixed(2)}`;
      document.getElementById('total').textContent = `₹${total.toFixed(2)}`;
    }
    
    // ===== Form Validation Functions =====
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }
    
    function validatePhone(phone) {
      const re = /^[0-9]{10}$/;
      return re.test(phone);
    }
    
    function validateCardNumber(cardNumber) {
      const re = /^[0-9]{16}$/;
      return re.test(cardNumber.replace(/\s/g, ''));
    }
    
    function validateExpiryDate(expiryDate) {
      const re = /^(0[1-9]|1[0-2])\/([0-9]{2})$/;
      if (!re.test(expiryDate)) return false;
      
      const [month, year] = expiryDate.split('/');
      const now = new Date();
      const currentYear = now.getFullYear() % 100;
      const currentMonth = now.getMonth() + 1;
      
      return parseInt(year) > currentYear || 
            (parseInt(year) === currentYear && parseInt(month) >= currentMonth);
    }
    
    function validateCVV(cvv) {
      const re = /^[0-9]{3,4}$/;
      return re.test(cvv);
    }
    
    function validateUPI(upiId) {
      const re = /^[a-zA-Z0-9.\-_]{2,49}@[a-zA-Z]{2,}$/;
      return re.test(upiId);
    }
    
    function showError(inputId, message) {
      const formGroup = document.getElementById(inputId + 'Group');
      if (formGroup) {
        formGroup.classList.add('error');
        formGroup.querySelector('.error-message').textContent = message;
      }
    }
    
    function clearError(inputId) {
      const formGroup = document.getElementById(inputId + 'Group');
      if (formGroup) {
        formGroup.classList.remove('error');
      }
    }
    
    // ===== Show Success Message =====
    function showSuccessMessage(message) {
      // Create a temporary success message
      const successDiv = document.createElement('div');
      successDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #4CAF50;
        color: white;
        padding: 15px 20px;
        border-radius: 5px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        z-index: 3000;
        max-width: 300px;
        animation: slideIn 0.3s ease;
      `;
      
      successDiv.innerHTML = `
        <div style="display: flex; align-items: center;">
          <i class="fas fa-check-circle" style="margin-right: 10px; font-size: 1.2rem;"></i>
          <span>${message}</span>
        </div>
      `;
      
      document.body.appendChild(successDiv);
      
      // Remove after 5 seconds
      setTimeout(() => {
        successDiv.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => {
          if (successDiv.parentNode) {
            successDiv.parentNode.removeChild(successDiv);
          }
        }, 300);
      }, 5000);
      
      // Add CSS for animations
      if (!document.getElementById('success-message-styles')) {
        const style = document.createElement('style');
        style.id = 'success-message-styles';
        style.textContent = `
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
          }
        `;
        document.head.appendChild(style);
      }
    }
    
    // ===== Order Success Modal Functions =====
    const orderSuccessModal = document.getElementById('orderSuccessModal');
    const paymentProcessingModal = document.getElementById('paymentProcessingModal');
    const viewOrdersBtn = document.getElementById('viewOrdersBtn');
    const continueShoppingBtn = document.getElementById('continueShoppingBtn');
    
    function showOrderSuccess(orderData) {
      // Populate order details in the modal
      document.getElementById('successOrderId').textContent = orderData.orderId;
      
      // Calculate estimated delivery date (7 days from now)
      const deliveryDate = new Date();
      deliveryDate.setDate(deliveryDate.getDate() + 7);
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById('estimatedDelivery').textContent = deliveryDate.toLocaleDateString('en-US', options);
      
      // Show shipping address
      const address = orderData.customerInfo.address;
      const city = orderData.customerInfo.city;
      const state = orderData.customerInfo.state;
      const zipCode = orderData.customerInfo.zipCode;
      document.getElementById('shippingAddress').textContent = `${address}, ${city}, ${state} ${zipCode}`;
      
      // Show the modal
      orderSuccessModal.classList.add('active');
      
      // Disable body scrolling when modal is open
      document.body.style.overflow = 'hidden';
    }
    
    function hideOrderSuccess() {
      orderSuccessModal.classList.remove('active');
      document.body.style.overflow = 'auto';
    }
    
    function showPaymentProcessing() {
      paymentProcessingModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    
    function hidePaymentProcessing() {
      paymentProcessingModal.classList.remove('active');
      document.body.style.overflow = 'auto';
    }
    
    // Event listeners for modal buttons
    viewOrdersBtn.addEventListener('click', () => {
      hideOrderSuccess();
      // Redirect to orders page
      window.location.href = 'orders.html';
    });
    
    continueShoppingBtn.addEventListener('click', () => {
      hideOrderSuccess();
      window.location.href = 'index.html';
    });
    
    // Close modal when clicking outside the modal content
    orderSuccessModal.addEventListener('click', (e) => {
      if (e.target === orderSuccessModal) {
        hideOrderSuccess();
      }
    });
    
    paymentProcessingModal.addEventListener('click', (e) => {
      if (e.target === paymentProcessingModal) {
        hidePaymentProcessing();
      }
    });
    
    // ===== Form Validation and Submission =====
    const checkoutForm = document.getElementById('checkoutForm');
    
    checkoutForm.addEventListener('submit', (e) => {
      e.preventDefault();
      let isValid = true;
      
      // Clear previous errors
      const allFormGroups = document.querySelectorAll('.form-group');
      allFormGroups.forEach(group => group.classList.remove('error'));
      
      // Validate shipping information
      const firstName = document.getElementById('firstName').value;
      const lastName = document.getElementById('lastName').value;
      const email = document.getElementById('email').value;
      const phone = document.getElementById('phone').value;
      const address = document.getElementById('address').value;
      const city = document.getElementById('city').value;
      const state = document.getElementById('state').value;
      const zipCode = document.getElementById('zipCode').value;
      const country = document.getElementById('country').value;
      
      if (!firstName) {
        showError('firstName', 'Please enter your first name');
        isValid = false;
      }
      
      if (!lastName) {
        showError('lastName', 'Please enter your last name');
        isValid = false;
      }
      
      if (!email) {
        showError('email', 'Please enter your email address');
        isValid = false;
      } else if (!validateEmail(email)) {
        showError('email', 'Please enter a valid email address');
        isValid = false;
      }
      
      if (!phone) {
        showError('phone', 'Please enter your phone number');
        isValid = false;
      } else if (!validatePhone(phone)) {
        showError('phone', 'Please enter a valid 10-digit phone number');
        isValid = false;
      }
      
      if (!address) {
        showError('address', 'Please enter your shipping address');
        isValid = false;
      }
      
      if (!city) {
        showError('city', 'Please enter your city');
        isValid = false;
      }
      
      if (!state) {
        showError('state', 'Please enter your state');
        isValid = false;
      }
      
      if (!zipCode) {
        showError('zipCode', 'Please enter your ZIP code');
        isValid = false;
      }
      
      if (!country) {
        showError('country', 'Please select your country');
        isValid = false;
      }
      
      // Validate billing information if different
      if (differentBilling.checked) {
        const billingFirstName = document.getElementById('billingFirstName').value;
        const billingLastName = document.getElementById('billingLastName').value;
        const billingAddress = document.getElementById('billingAddress').value;
        const billingCity = document.getElementById('billingCity').value;
        const billingState = document.getElementById('billingState').value;
        const billingZipCode = document.getElementById('billingZipCode').value;
        const billingCountry = document.getElementById('billingCountry').value;
        
        if (!billingFirstName) {
          showError('billingFirstName', 'Please enter your first name');
          isValid = false;
        }
        
        if (!billingLastName) {
          showError('billingLastName', 'Please enter your last name');
          isValid = false;
        }
        
        if (!billingAddress) {
          showError('billingAddress', 'Please enter your billing address');
          isValid = false;
        }
        
        if (!billingCity) {
          showError('billingCity', 'Please enter your city');
          isValid = false;
        }
        
        if (!billingState) {
          showError('billingState', 'Please enter your state');
          isValid = false;
        }
        
        if (!billingZipCode) {
          showError('billingZipCode', 'Please enter your ZIP code');
          isValid = false;
        }
        
        if (!billingCountry) {
          showError('billingCountry', 'Please select your country');
          isValid = false;
        }
      }
      
      // Check if cart is empty
      let cart = [];
      try {
        const cartData = localStorage.getItem('cart');
        cart = cartData ? JSON.parse(cartData) : [];
      } catch (e) {
        console.error('Error loading cart data:', e);
        cart = [];
      }
      
      if (cart.length === 0) {
        alert('Your cart is empty. Please add items to your cart before placing an order.');
        isValid = false;
      }
      
      // Payment method validation
      const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
      
      if (paymentMethod === 'credit-card') {
        const cardNumber = document.getElementById('cardNumber').value;
        const expiryDate = document.getElementById('expiryDate').value;
        const cvv = document.getElementById('cvv').value;
        const cardName = document.getElementById('cardName').value;
        
        if (!cardNumber) {
          showError('cardNumber', 'Please enter your card number');
          isValid = false;
        } else if (!validateCardNumber(cardNumber)) {
          showError('cardNumber', 'Please enter a valid 16-digit card number');
          isValid = false;
        }
        
        if (!expiryDate) {
          showError('expiryDate', 'Please enter the expiry date');
          isValid = false;
        } else if (!validateExpiryDate(expiryDate)) {
          showError('expiryDate', 'Please enter a valid expiry date (MM/YY)');
          isValid = false;
        }
        
        if (!cvv) {
          showError('cvv', 'Please enter the CVV');
          isValid = false;
        } else if (!validateCVV(cvv)) {
          showError('cvv', 'Please enter a valid CVV (3-4 digits)');
          isValid = false;
        }
        
        if (!cardName) {
          showError('cardName', 'Please enter the name on your card');
          isValid = false;
        }
      }
      
      if (paymentMethod === 'upi') {
        const upiId = document.getElementById('upiId').value;
        
        if (!upiId) {
          showError('upiId', 'Please enter your UPI ID');
          isValid = false;
        } else if (!validateUPI(upiId)) {
          showError('upiId', 'Please enter a valid UPI ID');
          isValid = false;
        }
      }
      
      if (paymentMethod === 'net-banking') {
        const selectedBank = document.getElementById('selectedBank').value;
        
        if (!selectedBank) {
          alert('Please select a bank for net banking');
          isValid = false;
        }
      }
      
      // Cash on delivery doesn't require additional validation
      
      if (!isValid) {
        // Scroll to the first error
        const firstError = document.querySelector('.form-group.error');
        if (firstError) {
          firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        return;
      }
      
      // If validation passes, process order
      processOrder();
    });
    
    // Process the order
    function processOrder() {
      // Show payment processing modal
      showPaymentProcessing();
      
      // Simulate payment processing with a delay
      setTimeout(() => {
        // Get order details
        let cart = [];
        try {
          const cartData = localStorage.getItem('cart');
          cart = cartData ? JSON.parse(cartData) : [];
        } catch (e) {
          console.error('Error loading cart data:', e);
          cart = [];
        }
        
        const subtotal = cart.reduce((sum, item) => {
          const quantity = item.quantity || item.qty || 1;
          return sum + (item.price * quantity);
        }, 0);
        
        const shipping = 50;
        const tax = subtotal * 0.12;
        const discount = 100;
        const total = subtotal + shipping + tax - discount;
        
        // Generate order ID
        const orderId = 'ORD' + Date.now();
        
        // Create order data object
        const orderData = {
          orderId: orderId,
          items: cart,
          customerInfo: {
            firstName: document.getElementById('firstName').value,
            lastName: document.getElementById('lastName').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            address: document.getElementById('address').value,
            city: document.getElementById('city').value,
            state: document.getElementById('state').value,
            zipCode: document.getElementById('zipCode').value,
            country: document.getElementById('country').value
          },
          billingInfo: differentBilling.checked ? {
            firstName: document.getElementById('billingFirstName').value,
            lastName: document.getElementById('billingLastName').value,
            address: document.getElementById('billingAddress').value,
            city: document.getElementById('billingCity').value,
            state: document.getElementById('billingState').value,
            zipCode: document.getElementById('billingZipCode').value,
            country: document.getElementById('billingCountry').value
          } : null,
          paymentMethod: document.querySelector('input[name="paymentMethod"]:checked').value,
          paymentDetails: getPaymentDetails(),
          subtotal: subtotal,
          shipping: shipping,
          tax: tax,
          discount: discount,
          total: total,
          orderDate: new Date().toISOString(),
          status: 'processing'
        };
        
        // Save order to orders history
        saveOrderToHistory(orderData);
        
        // Hide payment processing modal
        hidePaymentProcessing();
        
        // Show success modal
        showOrderSuccess(orderData);
        
        // Clear the cart
        localStorage.removeItem('cart');
        
        // Reload cart items to update the order summary
        loadCartItems();
      }, 3000); // Simulate 3 seconds payment processing
    }
    
    // Get payment details based on selected method
    function getPaymentDetails() {
      const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
      
      switch(paymentMethod) {
        case 'credit-card':
          return {
            cardNumber: document.getElementById('cardNumber').value.slice(-4),
            cardType: 'Credit Card'
          };
        case 'upi':
          return {
            upiId: document.getElementById('upiId').value,
            paymentType: 'UPI'
          };
        case 'net-banking':
          return {
            bank: document.getElementById('selectedBank').value,
            paymentType: 'Net Banking'
          };
        case 'cash-on-delivery':
          return {
            paymentType: 'Cash on Delivery'
          };
        default:
          return {};
      }
    }
    
    // Save order to order history
    function saveOrderToHistory(orderData) {
      let orders = [];
      try {
        const ordersData = localStorage.getItem('orderHistory');
        orders = ordersData ? JSON.parse(ordersData) : [];
      } catch (e) {
        console.error('Error loading order history:', e);
        orders = [];
      }
      
      // Add new order to the beginning of the array
      orders.unshift(orderData);
      
      // Save updated orders array
      localStorage.setItem('orderHistory', JSON.stringify(orders));
    }
    
    // ===== Initialize Page =====
    document.addEventListener('DOMContentLoaded', () => {
      // Load cart data
      loadCartItems();
      
      // Set initial selected state for payment methods
      updatePaymentMethodDisplay();
      
      // Add input event listeners to clear errors when user types
      const inputs = document.querySelectorAll('input, select');
      inputs.forEach(input => {
        input.addEventListener('input', () => {
          clearError(input.id);
        });
      });
    });
  </script>
  <!-- Add this button in your checkout form section -->
    <div style="margin-top: 20px; text-align: center;">
     <a href="orders.html" class="btn btn-primary" style="display: inline-block; margin: 10px;">
    <i class="fas fa-list"></i> View Orders Page
  </a>
  <script src="script.js"></script>
  <button type="button" id="testOrder" style="background: #ff6600; color: white; border: none; padding: 10px; margin: 10px; border-radius: 5px;">
  Test Order (Bypass Validation)
</button>

<script>
// Add this test function
document.getElementById('testOrder').addEventListener('click', function() {
  // Fill form with test data
  document.getElementById('firstName').value = 'John';
  document.getElementById('lastName').value = 'Doe';
  document.getElementById('email').value = 'john@example.com';
  document.getElementById('phone').value = '1234567890';
  document.getElementById('address').value = '123 Test Street';
  document.getElementById('city').value = 'Test City';
  document.getElementById('state').value = 'Test State';
  document.getElementById('zipCode').value = '123456';
  document.getElementById('country').value = 'IN';
  
  // Process order directly
  processOrder();
});
</script>
</div>
</body>
</html>